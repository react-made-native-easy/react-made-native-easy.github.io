<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Android Build setup | React Made Native Easy</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.3.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-edit-link/plugin.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../11-devops/11.2-ios-build-setup.html" />
    
    
    <link rel="prev" href="../11-devops/11.0-devops.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="10.1" data-basepath=".." data-revision="Sat Jul 28 2018 01:07:14 GMT+0530 (IST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="3-react-native-internals/3.1-react-native-internals.html">
            
                
                    <a href="../3-react-native-internals/3.1-react-native-internals.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        React Native Internals üì°
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="4-setting-up-the-project/4.1-installing-react-native.html">
            
                
                    <a href="../4-setting-up-the-project/4.1-installing-react-native.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Setting up the project üåà
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="see-it-in-action.html">
            
                
                    <a href="../see-it-in-action.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        See it in action! üé¨
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="5-project-structure-and-start-building-some-app/5.0-intro.html">
            
                
                    <a href="../5-project-structure-and-start-building-some-app/5.0-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Project Structure üè¢
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="5-project-structure-and-start-building-some-app/5.1-customising-the-structure.html">
            
                
                    <a href="../5-project-structure-and-start-building-some-app/5.1-customising-the-structure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Customizing the project structure
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="5-project-structure-and-start-building-some-app/5.2-basic-components-and-platform-specific-code.html">
            
                
                    <a href="../5-project-structure-and-start-building-some-app/5.2-basic-components-and-platform-specific-code.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Creating basic components and writing platform-specific code
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="6-conventions-and-code-style/6.0-intro.html">
            
                
                    <a href="../6-conventions-and-code-style/6.0-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Conventions and Code Style üéì
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="6-conventions-and-code-style/6.1-eslint.html">
            
                
                    <a href="../6-conventions-and-code-style/6.1-eslint.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        ESLint: The guardian of code conventions ‚öîÔ∏è
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="6-conventions-and-code-style/6.2-git-pre-hooks.html">
            
                
                    <a href="../6-conventions-and-code-style/6.2-git-pre-hooks.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Github Pre-push/Pre-commit Hooks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="6-conventions-and-code-style/6.3-environment-variables.html">
            
                
                    <a href="../6-conventions-and-code-style/6.3-environment-variables.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Environment Variables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="6-conventions-and-code-style/6.4-es7-features.html">
            
                
                    <a href="../6-conventions-and-code-style/6.4-es7-features.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Speed up development with some and ES7 features ü§ò
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="7-testing/7.0-intro.html">
            
                
                    <a href="../7-testing/7.0-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Testing and Debugging üö´üêû
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="7-testing/7.1-jest-setup.html">
            
                
                    <a href="../7-testing/7.1-jest-setup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Jest setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="7-testing/7.2-snapshots.html">
            
                
                    <a href="../7-testing/7.2-snapshots.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Snapshots
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="7-testing/7.3-enzyme-testing.html">
            
                
                    <a href="../7-testing/7.3-enzyme-testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Testing stateful components using Enzyme
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="7-testing/7.4-mocking-rn-modules.html">
            
                
                    <a href="../7-testing/7.4-mocking-rn-modules.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Mocking RN modules
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="8-styling/8.0-intro.html">
            
                
                    <a href="../8-styling/8.0-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Styling üíÖüèª
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="8-styling/8.1-theme-variables.html">
            
                
                    <a href="../8-styling/8.1-theme-variables.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Theme Variables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="8-styling/8.2-common-styles-mixins.html">
            
                
                    <a href="../8-styling/8.2-common-styles-mixins.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Common Styles/Mixins
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="8-styling/8.3-separating-styles-from-component.html">
            
                
                    <a href="../8-styling/8.3-separating-styles-from-component.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Separating styles from component
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="9-redux/9.0-intro.html">
            
                
                    <a href="../9-redux/9.0-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Redux üóÑ
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="9-redux/9.1-redux-setup.html">
            
                
                    <a href="../9-redux/9.1-redux-setup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Redux setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="9-redux/9.2-presentational-vs-containers.html">
            
                
                    <a href="../9-redux/9.2-presentational-vs-containers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Presentational VS Containers
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="10-navigation/10.0-intro.html">
            
                
                    <a href="../10-navigation/10.0-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Navigation üö™
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="10-navigation/10.1-using-react-navigation.html">
            
                
                    <a href="../10-navigation/10.1-using-react-navigation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Using React-navigation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="10-navigation/10.2-integrating-with-redux-store.html">
            
                
                    <a href="../10-navigation/10.2-integrating-with-redux-store.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Integrating with redux store
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="10-navigation/10.3-file-structure-for-routes.html">
            
                
                    <a href="../10-navigation/10.3-file-structure-for-routes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        File Structure for routes
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="11-devops/11.0-devops.html">
            
                
                    <a href="../11-devops/11.0-devops.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        DevOps ‚öôÔ∏è
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="10.1" data-path="11-devops/11.1-android-build-setup.html">
            
                
                    <a href="../11-devops/11.1-android-build-setup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Android Build setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="11-devops/11.2-ios-build-setup.html">
            
                
                    <a href="../11-devops/11.2-ios-build-setup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        iOS Build setup
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="12-svg-icons-using-react-native-vector-icons/12.0-intro.html">
            
                
                    <a href="../12-svg-icons-using-react-native-vector-icons/12.0-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        SVG Icons using react-native-vector-icons üêæ
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="11.1" data-path="12-svg-icons-using-react-native-vector-icons/12.1-creating-custom-iconset.html">
            
                
                    <a href="../12-svg-icons-using-react-native-vector-icons/12.1-creating-custom-iconset.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.</b>
                        
                        Custom Icon set
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="12" data-path="13-internationalization/13.1-framework-intro.html">
            
                
                    <a href="../13-internationalization/13.1-framework-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Internationalization üáÆüá≥üá∫üá∏üá∑üá∫
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="12.1" data-path="13-internationalization/13.2-language-toggle.html">
            
                
                    <a href="../13-internationalization/13.2-language-toggle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.1.</b>
                        
                        Adding language toggle feature
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12.2" data-path="13-internationalization/13.3-integration-with-react-navigation.html">
            
                
                    <a href="../13-internationalization/13.3-integration-with-react-navigation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.2.</b>
                        
                        Integration with react-navigation
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="13" data-path="16-custom-native-modules/16.0-intro.html">
            
                
                    <a href="../16-custom-native-modules/16.0-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Custom Native Modules üçÆ
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.1" data-path="16-custom-native-modules/16.1-android-native-module.html">
            
                
                    <a href="../16-custom-native-modules/16.1-android-native-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.1.</b>
                        
                        Android Native Modules
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.2" data-path="16-custom-native-modules/16.2-ios-native-module.html">
            
                
                    <a href="../16-custom-native-modules/16.2-ios-native-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.2.</b>
                        
                        iOS Native Modules
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="14" data-path="references.html">
            
                
                    <a href="../references.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        References
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="the-end.html">
            
                
                    <a href="../the-end.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        The End
                    </a>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >React Made Native Easy</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <a id="edit-link" href="https://github.com/react-made-native-easy/book/blob/master/11-devops/11.1-android-build-setup.md" class="btn fa fa-edit pull-left">&nbsp;&nbsp;Edit</a><h1 id="android-build-scripts-setup">Android build scripts/setup</h1>
<p>In Android, builds are done via Gradle.</p>
<p>These are a few pre-requisites to build a release apk.</p>
<ul>
<li><strong>BUILD_NAME</strong> - The name that will be used by testers to identify the build, for example: &apos;1.1.1&apos;, &apos;1.0-alpha&apos;, etc.</li>
<li><strong>BUILD_NUMBER</strong> - A unique integer number identifying the build. This is used by Android to identify which build is the updated build. This should be an integer number, for example, 1, 111, 111, etc.</li>
<li><strong>ANDROID_APP_ID</strong> - This is the unique app identifier which is used to identify the app uniquely in the Google Play Store or can be used to identify if the build is dev, preprod or prod. These app ids may look like this: com.app.notetaker-dev, com.app.notetaker-alpha.</li>
<li><strong>ANDROID_KEYSTORE_FILE</strong> - This is the keystore file used to sign the app.</li>
<li><strong>ANDROID_KEYSTORE_PASSWORD</strong> - This is the keystore password used while creating the keystore.</li>
<li><strong>ANDROID_KEY_ALIAS</strong> - This is the alias used to create the keystore.</li>
<li><strong>ANDROID_KEY_PASSWORD</strong> - This is the password set for the key.</li>
</ul>
<h3 id="release-variants">Release variants</h3>
<p>Ideally, every app has three release variants just like a typical backend application:</p>
<ul>
<li>Dev build - The app which connects to the staging/dev backend environment. This can also include additional libraries like TestFairy.</li>
<li>Preprod build - The app which points to the preprod backend environment. This is usually very similar, if not identical to the production app.</li>
<li>Prod build - The final apk which should be released to the Play Store.</li>
</ul>
<p>Hence, we would need three different key stores for three different variants.</p>
<h3 id="let-s-get-started">Let&apos;s get started</h3>
<p>The first step is to create a new keystore file.</p>
<p>Use the following command to create a keystore.</p>
<pre><code class="lang-sh">keytool -genkey -v -keystore dev_release.keystore -alias dev-alias -keyalg RSA -keysize <span class="hljs-number">2048</span> -validity <span class="hljs-number">10000</span>
</code></pre>
<p>You would be prompted to enter ANDROID_KEYSTORE_PASSWORD, ANDROID_KEY_ALIAS, ANDROID_KEY_PASSWORD and a few other details.</p>
<p>Note these down somewhere and keep the keystore file safe.</p>
<p>The Android documentation has the following warning:</p>
<pre><code>Note about saving the keystore:

Once you publish the app on the Play Store, you will need to republish your app under a different package name (losing all downloads and ratings) if you want to change the signing key at any point. So backup your keystore and don&apos;t forget the passwords.
</code></pre><p>For the build to work the keystore file should be placed at <code>android/app/dev_release.keystore</code>.</p>
<p><em>Make sure the keystore file is git ignored so that you don&apos;t check the file into git</em></p>
<p>Now, create the following script.</p>
<blockquote>
<p>scripts/android/builder.sh</p>
</blockquote>
<pre><code class="lang-sh"><span class="hljs-shebang">#!/bin/bash
</span>
<span class="hljs-built_in">set</span> <span class="hljs-operator">-e</span>
cur_dir=`dirname <span class="hljs-variable">$0</span>`

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;BUILDING ANDROID&quot;</span>;
<span class="hljs-built_in">cd</span> <span class="hljs-variable">$cur_dir</span>/../../android &amp;&amp;
./gradlew clean assembleRelease -PBUILD_NAME=<span class="hljs-variable">$BUILD_NAME</span> -PBUILD_NUMBER=<span class="hljs-variable">$BUILD_NUMBER</span> -PANDROID_APP_ID=<span class="hljs-variable">$ANDROID_APP_ID</span> -PMYAPP_RELEASE_STORE_FILE=<span class="hljs-variable">$ANDROID_KEYSTORE_FILE</span> -PMYAPP_RELEASE_KEY_ALIAS=<span class="hljs-variable">$ANDROID_KEY_ALIAS</span> -PMYAPP_RELEASE_STORE_PASSWORD=<span class="hljs-variable">$ANDROID_KEYSTORE_PASSWORD</span> -PMYAPP_RELEASE_KEY_PASSWORD=<span class="hljs-variable">$ANDROID_KEY_PASSWORD</span> &amp;&amp; <span class="hljs-built_in">cd</span> ..

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;APK will be present at android/app/build/outputs/apk/app-release.apk&quot;</span>
</code></pre>
<p>Apart from this script, we would also need to modify:</p>
<blockquote>
<p>android/app/build.gradle</p>
</blockquote>
<pre><code class="lang-...">...
def enableProguardInReleaseBuilds = false
...
...
def appID = System.getenv(&quot;ANDROID_APP_ID&quot;) ?: &quot;com.notetaker&quot;
def vCode = System.getenv(&quot;BUILD_NUMBER&quot;) ?: &quot;0&quot;
def vName = System.getenv(&quot;BUILD_NAME&quot;) ?: &quot;1.0.local&quot;

android {
    compileSdkVersion 23
    buildToolsVersion &quot;23.0.1&quot;
    defaultConfig {
        applicationId appID
        minSdkVersion 16
        targetSdkVersion 22
        versionCode Integer.parseInt(vCode)
        versionName vName
        ndk {
            abiFilters &quot;armeabi-v7a&quot;, &quot;x86&quot;
        }
    }
  ...
  ...
  ...
    signingConfigs {
       release {
           if (project.hasProperty(&apos;MYAPP_RELEASE_STORE_FILE&apos;)) {
               storeFile file(MYAPP_RELEASE_STORE_FILE)
               storePassword MYAPP_RELEASE_STORE_PASSWORD
               keyAlias MYAPP_RELEASE_KEY_ALIAS
               keyPassword MYAPP_RELEASE_KEY_PASSWORD
           }
       }
   }
    buildTypes {
      release {
          minifyEnabled enableProguardInReleaseBuilds
          proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;
          signingConfig signingConfigs.release
      }
    }
...
...
...
</code></pre>
<p>The above script tells Gradle to</p>
<ol>
<li>clean</li>
<li>build a release apk</li>
</ol>
<p>Also, all the important parameters are passed via environment variables.
This ensures that we can:</p>
<ol>
<li><p>Build the apk manually by running</p>
<pre><code class="lang-sh">BUILD_NAME=<span class="hljs-number">1.1</span>.<span class="hljs-number">1</span> BUILD_NUMBER=<span class="hljs-number">11</span> ANDROID_APP_ID=<span class="hljs-string">&apos;com.test.appid&apos;</span> ANDROID_KEYSTORE_FILE=<span class="hljs-string">&apos;dev_release.keystore&apos;</span> ANDROID_KEY_ALIAS=<span class="hljs-string">&apos;dev-alias&apos;</span> ANDROID_KEYSTORE_PASSWORD=&lt;PASSOWORD&gt; ANDROID_KEY_PASSWORD=&lt;PASSWORD&gt; sh ./scripts/android/builder.sh
</code></pre>
</li>
<li><p>Setup the environment variables in CI platform so that the CI can build the apk without manual intervention. Keep in mind that typically every CI provides a unique build number that you can pass to the script for BUILD_NUMBER.</p>
</li>
</ol>
<p>Woot! Its that simple to build a release apk for Android.</p>
<p>The built apk can be found at: <code>android/app/build/outputs/apk/app-release.apk</code></p>
<h3 id="windows-users">Windows users</h3>
<p>If you are running Windows 10 64bit or higher you can enable Ubuntu bash shell on your systems and gain access to the full bash command line and run the script there.
More on that here: <a href="https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/" target="_blank">https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/</a></p>
<p>Alternatively, you could install Cygwin on your system and run the scripts mentioned.</p>
<p>The code till here can be found on the <strong>branch</strong> <a href="https://github.com/react-made-native-easy/note-taker/tree/chapter/11/11.1" target="_blank">chapter/11/11.1</a></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../11-devops/11.0-devops.html" class="navigation navigation-prev " aria-label="Previous page: DevOps ‚öôÔ∏è"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../11-devops/11.2-ios-build-setup.html" class="navigation navigation-next " aria-label="Next page: iOS Build setup"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-github-buttons/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"disqus":{"shortName":"reactnative-guide"},"edit-link":{"base":"https://github.com/react-made-native-easy/book/blob/master","label":"Edit"},"ga":{"token":"UA-111146084-1","configuration":"auto"},"github-buttons":{"buttons":[{"user":"react-made-native-easy","repo":"book","type":"star","size":"small"}]}};
    gitbook.start(config);
});
</script>

        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-111146084-1', 'auto');ga('send', 'pageview');</script>
    </body>
    
</html>
